
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->
    <script src='https://cdn.plot.ly/plotly-2.32.0.min.js'></script>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="APIDiv"></div>
    <script>
        getAPIData()
        function getAPIData(){
            fetch("Latest/api.json").then(response => {
                return response.json();
            }).then(data => {
                console.log(data);
                processDataAndPlot_Pie(data,"APIDiv");
            }).catch(err => {
                console.log("error", err);
            });
        }
        // Step 4: Wrap the bottom code in a function
        function processDataAndPlot_Pie(x,div) {
            console.log(x);
            // Convert the data into the desired format
            var values = [];
            var labels = [];
            for (var key in x) {
                if (x.hasOwnProperty(key)) {
                    values.push(parseInt(x[key]));  // Convert string to integer
                    labels.push(key);
                }
            }
            var data = [
                {
                    values: values,
                    labels: labels,
                    type: 'pie'
                }
            ];
            var layout = {
                height: 400,
                width: 500
            };
            Plotly.newPlot(div, data, layout);
        }
    </script>

    <div id="UI_test_Div"></div>
    <script>
        getUI_test_Data()
        function getUI_test_Data(){
            fetch("Latest/ui.json").then(response => {
                return response.json();
            }).then(data => {
                console.log(data);
                processDataAndPlot_Pie(data["test"],"UI_test_Div");
            }).catch(err => {
                console.log("error", err);
            });
        }
    </script>
    <div id="UI_event_Div"></div>
    <script>
        getUI_test_Data()
        function getUI_test_Data(){
            fetch("Latest/ui.json").then(response => {
                return response.json();
            }).then(data => {
                console.log(data);
                processDataAndPlot_Pie(data["event"],"UI_event_Div");
            }).catch(err => {
                console.log("error", err);
            });
        }
    </script>
    
</body>
</html>
